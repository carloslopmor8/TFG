import{_ as C}from"./AuthenticatedLayout-32308bba.js";import{K as f,D as k,f as a,a as l,u as e,w as _,F as h,o as n,Z as F,b as t,t as o,l as m,i as b,d as p,g as D,n as G}from"./app-dbf8dd9a.js";import"./ApplicationLogo-0c41a724.js";const N={class:"font-semibold text-xl text-gray-800 leading-tight"},A={class:"py-12"},U={class:"max-w-full mx-auto sm:px-6 lg:px-8"},B={class:"flex"},E={class:"bg-white shadow-md rounded-md p-8"},I={class:"text-2xl font-semibold mb-4"},S={class:"text-gray-600 mb-6"},V=["src"],$={class:"m-4 w-1/2"},P=t("h2",{class:"text-xl font-semibold mb-4"},"Gastos",-1),L={class:"m-4 w-1/2"},T=t("h2",{class:"text-xl font-semibold mb-4"},"Gastos por Usuario",-1),X={class:"m-4 mt-8 mb-8"},K=t("h2",{class:"text-xl font-semibold mb-4"},"Gastos por Usuario",-1),j={class:"overflow-x-auto"},z={class:"min-w-full border border-gray-200"},M={class:"bg-gray-100"},O=t("th",{class:"px-4 py-2"},"Factura Id",-1),R=t("th",{class:"px-4 py-2"},"Fecha",-1),Z=t("th",{class:"px-4 py-2"},"Concepto",-1),q=t("th",{class:"px-4 py-2"},"Observación",-1),H=t("th",{class:"px-4 py-2"},"Importe",-1),J=t("th",{class:"px-4 py-2"},"IVA",-1),Q=t("th",{class:"px-4 py-2"},"Importe Final",-1),W={class:"px-4 py-2"},Y={class:"px-4 py-2"},tt=t("th",{class:"px-4 py-2"},"Editar Gasto",-1),et={class:"px-4 py-2"},st={class:"px-4 py-2"},ot={class:"px-4 py-2 gasto-tabla-nombre"},rt={class:"px-4 py-2"},at={class:"px-4 py-2"},nt={class:"px-4 py-2"},dt={class:"px-4 py-2"},it={class:"px-4 py-2"},lt={class:"px-4 py-2"},ct={class:"px-4 py-2"},ut=t("br",null,null,-1),_t={class:"label"},ht=t("br",null,null,-1),mt=t("hr",null,null,-1),pt=t("br",null,null,-1),bt={key:0,class:"m-8"},ft={class:"bg-white shadow-md rounded-md p-8 flex-1 mx-4 mb-4 overflow-auto max-h-50vh"},xt=t("h2",{class:"text-xl font-semibold mb-4"},"Usuarios Asignados",-1),yt={key:0},vt={key:1},gt={class:"bg-white shadow-md rounded-md p-8 flex-1 mx-4 mb-4 overflow-auto max-h-50vh"},wt=t("h2",{class:"text-xl font-semibold mb-4"},"Movimientos",-1),Nt={__name:"Show",setup(Ct){const{proyecto:r,movimientos:x,usuario:y}=f().props;f().props;const v=d=>new Date(d).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"});function g(d){for(var u=document.getElementsByClassName("gasto-tabla-nombre"),c=0;c<u.length;c++){var s=u[c].textContent.trim();s.includes(d)?u[c].parentNode.style.display="":u[c].parentNode.style.display="none"}}return(d,u)=>{const c=k("GoogleChart");return n(),a(h,null,[l(e(F),{title:"Dashboard"}),l(C,null,{header:_(()=>[t("h2",N,o(e(r).nombre),1)]),default:_(()=>[t("div",A,[t("div",U,[t("div",null,[t("div",B,[t("div",E,[t("h2",I,o(e(r).nombre),1),t("p",S,o(e(r).descripcion),1),t("img",{src:e(r).imagen_url,alt:"Imagen del proyecto",class:"w-full rounded-md h-60 object-cover mb-6"},null,8,V),t("div",$,[P,l(c,{data:e(r).chart,type:"PieChart"},null,8,["data"])]),t("div",L,[T,l(c,{data:e(r).user_chart,type:"ColumnChart"},null,8,["data"])]),t("div",X,[K,t("input",{type:"text",placeholder:"Buscar gastos",class:"w-full px-4 py-2 mb-2 border border-gray-300 rounded-md focus:ring-indigo-500 focus:border-indigo-500",onKeyup:u[0]||(u[0]=s=>g(s.target.value))},null,32),t("div",j,[t("table",z,[t("thead",null,[t("tr",M,[O,R,Z,q,H,J,Q,t("th",W,o(e(r).user.name),1),(n(!0),a(h,null,m(e(r).usuarios,(s,i)=>(n(),a("th",Y,o(s.user.name),1))),256)),tt])]),t("tbody",null,[(n(!0),a(h,null,m(e(r).gastos,(s,i)=>(n(),a("tr",{key:i,class:G([i%2===0?"bg-gray-50":"","gasto-tabla"])},[t("td",et,o(s.id_factura),1),t("td",st,o(v(s.created_at)),1),t("td",ot,o(s.nombre),1),t("td",rt,o(s.observacion),1),t("td",at,o(s.cantidad),1),t("td",nt,o(s.anadir_iva?"X":""),1),t("td",dt,o(s.cantidad_iva==0?s.cantidad:s.cantidad_iva),1),t("th",it,o(s.usuarios_id.includes(e(r).user.id)?"X":""),1),(n(!0),a(h,null,m(e(r).usuarios,(w,kt)=>(n(),a("th",lt,o(s.usuarios_id.includes(w.user.id)?"X":""),1))),256)),t("th",ct,[l(e(b),{href:d.route("proyecto.cantidades.update",{id:s.id}),class:"font-semibold text-gray-600 hover:text-green-900 focus:outline focus:outline-2 focus:rounded-sm focus:outline-red-500 m-4 mt-8 transition-colors duration-300 ease-in-out hover:border-b-2 border-transparent hover:border-green-900"},{default:_(()=>[p(" Editar ")]),_:2},1032,["href"])])],2))),128))])])])]),t("div",null,"Presupuesto: "+o(e(r).presupuesto.toFixed(2))+" $",1),ut,(n(!0),a(h,null,m(e(r).etiquetas,(s,i)=>(n(),a("div",{key:i,class:"row"},[t("div",_t,o(s.etiqueta)+": "+o(s.cantidad.toFixed(2))+"$ - "+o((s.cantidad/e(r).presupuesto*100).toFixed(2))+"% ",1),ht,mt]))),128)),pt,t("div",null,"Total Gastado: "+o(e(r).gastado.toFixed(2))+" $",1),t("div",null,"Total Restante: "+o(e(r).restante.toFixed(2))+" $",1),e(y).is_admin?(n(),a("div",bt,[l(e(b),{href:d.route("proyecto.cantidades.edit",{id:e(r).id}),class:"font-semibold text-gray-600 hover:text-green-900 focus:outline focus:outline-2 focus:rounded-sm focus:outline-red-500 m-4 mt-8 transition-colors duration-300 ease-in-out hover:border-b-2 border-transparent hover:border-green-900"},{default:_(()=>[p(" Añadir gasto ")]),_:1},8,["href"]),l(e(b),{href:d.route("proyecto.usuarios.index",{id:e(r).id}),class:"font-semibold text-gray-600 hover:text-green-900 focus:outline focus:outline-2 focus:rounded-sm focus:outline-red-500 m-4 mt-8 transition-colors duration-300 ease-in-out hover:border-b-2 border-transparent hover:border-green-900"},{default:_(()=>[p(" Administrar Usuarios ")]),_:1},8,["href"]),l(e(b),{href:d.route("proyecto.edit",{id:e(r).id}),class:"font-semibold text-gray-600 hover:text-green-900 focus:outline focus:outline-2 focus:rounded-sm focus:outline-red-500 m-4 mt-8 transition-colors duration-300 ease-in-out hover:border-b-2 border-transparent hover:border-green-900"},{default:_(()=>[p(" Editar Proyecto ")]),_:1},8,["href"]),l(e(b),{href:d.route("proyecto.delete",{id:e(r).id}),method:"delete",as:"button",class:"inline-block bg-red-500 text-white font-semibold py-2 px-4 rounded-md hover:bg-red-600 focus:outline-none focus:ring-2 focus:ring-red-400 focus:ring-opacity-50 transition duration-300 ease-in-out m-4 mt-8"},{default:_(()=>[p(" Delete Proyecto ")]),_:1},8,["href"])])):D("",!0)]),t("div",null,[t("div",ft,[xt,t("ul",null,[t("li",null,o(e(r).user.name)+" - Administrador",1),(n(!0),a(h,null,m(e(r).usuarios,(s,i)=>(n(),a("li",{key:i},[p(o(s.user.name)+" - ",1),s.is_admin?(n(),a("span",yt," Administrador")):(n(),a("span",vt,"Usuario"))]))),128))])]),t("div",gt,[wt,t("ul",null,[(n(!0),a(h,null,m(e(x),(s,i)=>(n(),a("li",{key:i,class:"mb-4"},o(s.user.name)+" - "+o(s.valor)+" - "+o(new Date(s.created_at).toLocaleDateString()),1))),128))])])])])])])])]),_:1})],64)}}};export{Nt as default};
